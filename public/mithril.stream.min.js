/*https://unpkg.com/mithril-stream@1.1.0/stream.js*/

!function(){"use strict";function t(){function t(){return arguments.length>0&&arguments[0]!==w&&n(t,arguments[0]),t._state.value}return e(t),arguments.length>0&&arguments[0]!==w&&n(t,arguments[0]),t}function e(e){e.constructor=t,e._state={id:g++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},e.map=e["fantasy-land/map"]=c,e["fantasy-land/ap"]=d,e["fantasy-land/of"]=t,e.valueOf=_,e.toJSON=v,e.toString=_,Object.defineProperties(e,{end:{get:function(){if(!e._state.endStream){var n=t();n.map(function(t){return!0===t&&(f(e),n._state.unregister=function(){f(n)}),t}),e._state.endStream=n}return e._state.endStream}}})}function n(t,e){a(t,e);for(var n in t._state.deps)r(t._state.deps[n],!1);null!=t._state.unregister&&t._state.unregister(),s(t)}function a(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function r(t,e){var n=t._state.parents;if(n.length>0&&n.every(l)&&(e||n.some(m))){var r=t._state.derive();if(r===w)return!1;a(t,r)}}function s(t){t._state.changed=!1;for(var e in t._state.deps)t._state.deps[e]._state.changed=!1}function i(e,n){if(!n.every(p))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return u(t(),n,function(){return e.apply(this,n.concat([n.filter(m)]))})}function u(t,e,n){var a=t._state;return a.derive=n,a.parents=e.filter(h),o(t,a.parents),r(t,!0),t}function o(t,e){for(var n=0;n<e.length;n++)e[n]._state.deps[t._state.id]=t,o(t,e[n]._state.parents)}function f(t){for(var e=0;e<t._state.parents.length;e++)delete t._state.parents[e]._state.deps[t._state.id];for(var n in t._state.deps){var a=t._state.deps[n],r=a._state.parents.indexOf(t);r>-1&&a._state.parents.splice(r,1)}t._state.state=2,t._state.deps={}}function c(t){return i(function(e){return t(e())},[this])}function d(t){return i(function(t,e){return t()(e())},[t,this])}function _(){return this._state.value}function v(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function p(t){return t._state}function l(t){return 1===t._state.state}function m(t){return t._state.changed}function h(t){return 2!==t._state.state}var g=0,w={};t["fantasy-land/of"]=t,t.merge=function(t){return i(function(){return t.map(function(t){return t()})},t)},t.combine=i,t.scan=function(t,e,n){var a=i(function(n){return e=t(e,n._state.value)},[n]);return 0===a._state.state&&a(e),a},t.scanMerge=function(t,e){var n=t.map(function(t){var e=t[0];return 0===e._state.state&&e(void 0),e});return i(function(){var a=arguments[arguments.length-1];return n.forEach(function(n,r){a.indexOf(n)>-1&&(e=t[r][1](e,n._state.value))}),e},n)},t.HALT=w,"undefined"!=typeof module?module.exports=t:"function"!=typeof window.m||"stream"in window.m?window.m={stream:t}:window.m.stream=t}();
